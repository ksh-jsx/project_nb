{% extends 'frame.html' %}

{% block content %}
<div class="mypage">
    <div class="mypage_topBar">
        <div>마이페이지</div>
        <ul>
            <li class="mypage_topBarLi"><div id="mypage_container1">개인 정보 수정</div></li>
            <li class="mypage_topBarLi"><div id="mypage_container2">방 정보 수정</div></li>
            <li class="mypage_topBarLi"><div id="mypage_container3">내가 찜한 방</div></li>
            <li class="mypage_topBarLi"><div id="mypage_container4">진행중인 계약</div></li>
            <li class="mypage_topBarLi"><div id="mypage_container5">완료된 계약</div></li>
        </ul>
    </div>
    <div class="mypage_topBar2">
        <div id="mypage_container1">&nbsp; - 개인 정보 수정</div>
        <div id="mypage_container2">&nbsp; - 방 정보 수정</div>
        <div id="mypage_container3">&nbsp; - 내가 찜한 방</div>
        <div id="mypage_container4">&nbsp; - 진행중인 계약</div>
        <div id="mypage_container5">&nbsp; - 완료된 계약</div>
    </div>
    <div class="mypage_containers">
        <div id="mobile_list1" class="mobile_list">개인 정보 수정 <span>&nbsp;▼</span></div>
        <div class="mypage_container1">
            {% for user_info in user_info %}
            <form method="post" autocomplete="off" class="signup_form">
                <input type="hidden" value="2" name="mypage_num">
                {% csrf_token %}
                <div class="signup_div">
                    <div class="signup_left">
                        <label for="id_username">아이디</label>
                    </div>
                    <div class="signup_right">
                        <input type="text" name="username" maxlength="150" required="" id="id_username" value="{{user_info.username}}">
                    </div>
                    {% if form.username.errors%}
                        <script>
                            $('#id_username').val('')
                            $('#id_username').attr('placeholder','중복된 아이디입니다.')
                        </script>
                    {%else%}
                    {%endif%}
                </div>
                <div class="signup_div" id="change_pwd1">
                    <div class="signup_left">
                        <label for="id_password1">비밀번호</label>
                    </div>
                    <div class="signup_right">
                        <input type="button" value="비밀번호 변경" id="pwd_btn">
                        <input type="hidden" name="password1" id="id_password1" value="0">
                        <input type="hidden" id="id_password2" value="0">
                    </div>
                </div>
                <div class="" id="change_pwd2"></div>
                <div class="signup_div">
                    <div class="signup_left">
                        <label for="id_name">이름</label>
                    </div>
                    <div class="signup_right">
                        <input type="text" name="name" maxlength="255" id="id_name" value="{{user_info.name}}">
                    </div>
                    {{form.name.errors }}
                </div>
                <div class="signup_div">
                    <div class="signup_left">
                        <label for="id_gender">성별</label>
                    </div>
                    <div class="signup_right">
                        {% if user_info.gender == '남자' %}
                        <input type="radio" id="id_gender1" name="gender" value="남자" required checked>
                        <label class="room-label" for="id_gender1">남자</label>
                        <input type="radio" id="id_gender2" name="gender" value="여자" required>
                        <label class="room-label" for="id_gender2">여자</label>
                        {% else %}
                        <input type="radio" id="id_gender1" name="gender" value="남자" required>
                        <label class="room-label" for="id_gender1">남자</label>
                        <input type="radio" id="id_gender2" name="gender" value="여자" required checked>
                        <label class="room-label" for="id_gender2">여자</label>
                        {% endif %}
                    </div>
                </div>
                <div class="signup_div">
                    <div class="signup_left">
                        <label for="id_meet_path">휴대전화</label>
                    </div>
                    <div class="signup_right">
                        {% if user_info.phone1 == None %}
                            <input type="text" name="phone1" maxlength="140" required id="id_phone1" value="">
                            {{form.phone1.errors }}
                            <span>-</span>
                            <input type="text" name="phone2" maxlength="140" required id="id_phone2" value="">
                            {{form.phone2.errors }}
                            <span>-</span>
                            <input type="text" name="phone3" maxlength="140" required id="id_phone3" value="">
                            {{form.phone3.errors }}
                        {% else %}
                            <input type="text" name="phone1" maxlength="140" required id="id_phone1" value="{{user_info.phone1}}">
                            {{form.phone1.errors }}
                            <span>-</span>
                            <input type="text" name="phone2" maxlength="140" required id="id_phone2" value="{{user_info.phone2}}">
                            {{form.phone2.errors }}
                            <span>-</span>
                            <input type="text" name="phone3" maxlength="140" required id="id_phone3" value="{{user_info.phone3}}">
                            {{form.phone3.errors }}
                        {% endif %}
                    </div>
                </div>
                <div class="signup_div" id="signup_div_email">
                    <div class="signup_left">
                        <label for="id_meet_path">이메일</label>
                    </div>
                    <div class="signup_right">
                        <input type="text" name="" maxlength="140" required id="id_email1" value=""> 
                        <br><span>@</span>
                        <input type="text" name="" maxlength="140" required id="id_email2" value="" disabled>
                        <select id="id_email3">
                            <option id="email1" value="naver.com">naver.com</option>
                            <option id="email2" value="gmail.com">gmail.com</option>
                            <option id="email3" value="daum.com">daum.com</option>
                        </select>
                        <input type="hidden" name="email" maxlength="140" required id="id_email" value="{{user_info.email}}">
                        <div class="mypage1_desc">*변경하는 경우 메일인증을 다시 받아야합니다.</div>
                    </div>
                    <script>
                        var email = "{{user_info.email}}"                      
                        var emails = email.split("@")
                        $("#id_email1").val(emails[0])
                        $("#id_email2").val(emails[1])
                        if(emails[1] === 'naver.com')
                            $("#email1").attr('selected','selected')
                        else if(emails[1] === 'gmail.com')
                            $("#email2").attr('selected','selected')
                        else if(emails[1] === 'daum.com')
                            $("#email3").attr('selected','selected')

                        $('#id_email1').change(function(){
                            var get_select1= $('#id_email1').val();
                            var get_select2= $('#id_email3 option:selected').val();
                            $('#id_email2').val(get_select2)
                            $('#id_email').val(get_select1+'@'+get_select2)
                        });
                        $('#id_email3').change(function(){
                            var get_select1= $('#id_email1').val();
                            var get_select2= $('#id_email3 option:selected').val();
                            $('#id_email2').val(get_select2)
                            $('#id_email').val(get_select1+'@'+get_select2)
                        });
                    </script>
                </div>
                <div class="signup_div">
                    <div class="signup_left">
                        <label for="id_gender">흡연여부</label>
                    </div>
                    <div class="signup_right">
                        {% if user_info.ciga == '흡연' %}
                            <input type="radio" id="id_ciga1" name="ciga" value="흡연" required checked>
                            <label class="room-label" for="id_ciga1">흡연</label>
                            <input type="radio" id="id_ciga2" name="ciga" value="비흡연" required>
                            <label class="room-label" for="id_ciga2">비흡연</label>
                        {% else %}
                            <input type="radio" id="id_ciga1" name="ciga" value="흡연" required>
                            <label class="room-label" for="id_ciga1">흡연</label>
                            <input type="radio" id="id_ciga2" name="ciga" value="비흡연" required checked>
                            <label class="room-label" for="id_ciga2">비흡연</label>                           
                        {% endif %}
                    </div>
                    {{form.ciga.errors }}
                </div>
                <div class="signup_div">
                    <div class="signup_left">
                        <label for="id_gender">이메일수신여부</label>
                    </div>
                    <div class="signup_right">
                        {% if user_info.ciga == '흡연' %}
                            <input type="radio" id="id_mail_agree1" name="mail_agree" value="동의 함" required checked>
                            <label class="room-label" for="id_mail_agree1">동의 함</label>
                            <input type="radio" id="id_mail_agree2" name="mail_agree" value="동의 안함" required>
                            <label class="room-label" for="id_mail_agree2">동의 안함</label>
                        {% else %}
                            <input type="radio" id="id_mail_agree1" name="mail_agree" value="동의 함" required >
                            <label class="room-label" for="id_mail_agree1">동의 함</label>
                            <input type="radio" id="id_mail_agree2" name="mail_agree" value="동의 안함" required checked>
                            <label class="room-label" for="id_mail_agree2">동의 안함</label>                       
                        {% endif %}
                    </div>
                    {{form.ciga.errors }}
                </div>
                <div class="signup_div">
                    <div class="signup_left">
                        <label for="id_gender">SMS수신여부</label>
                    </div>
                    <div class="signup_right">
                        {% if user_info.ciga == '흡연' %}
                            <input type="radio" id="id_sms_agree1" name="sms_agree" value="동의 함" required checked>
                            <label class="room-label" for="id_sms_agree1">동의 함</label>
                            <input type="radio" id="id_sms_agree2" name="sms_agree" value="동의 안함" required>
                            <label class="room-label" for="id_sms_agree2">동의 안함</label>
                        {% else %}
                            <input type="radio" id="id_sms_agree1" name="sms_agree" value="동의 함" required >
                            <label class="room-label" for="id_sms_agree1">동의 함</label>
                            <input type="radio" id="id_sms_agree2" name="sms_agree" value="동의 안함" required checked>
                            <label class="room-label" for="id_sms_agree2">동의 안함</label>                     
                        {% endif %}
                    </div>
                    {{form.ciga.errors }}
                </div>
                <div class="signup_div" id="signup_div_last">
                    <div class="signup_left">
                        <label for="id_active">인증</label>
                    </div>
                    <div class="signup_right">
                        {% if user_info.active %}
                        <input  type="type"  value="인증됨" readonly>    
                        {% else %}
                        <input  type="type"  value="인증 필요" readonly>    
                        {% endif %}
                        <input name="active" type="hidden" value="{{user_info.active}}">
                    </div>
                    {{form.email.errors }}
                </div>
                <br>
                <br>
                
                <button type="submit" id="submitBtn" style="display: none">등록</button>
            </form>
            {% endfor %}
            <div id="submitDiv" onclick="check_password()" style="cursor: pointer;">수정하기</div>    
            <button type="submit" id="submitBtn" style="display: none">등록</button>
        </div>
        <script>
            pwd_clicked = true;
            function check_password()
            {
                if(document.getElementById('id_password2').value === document.getElementById('id_password1').value || pwd_clicked)
                {
                    "{% for user_info in user_info %}"
                    if("{{user_info.email}}" != $('#id_email').val())
                    {
                        if(confirm('이메일이 교체되어 재인증이 필요합니다.'))
                        {
                            document.getElementById("submitBtn").click();
                        }
                    }
                    else
                    {   
                        if(confirm('정말 교체하시겠습니까?'))
                        {
                            document.getElementById("submitBtn").click();
                        }
        
                    }
                    "{%endfor%}"
                }   
                else
                {
                    alert('비밀번호를 다시 확인해주세요')
                    document.getElementById("id_password1").focus();
                }
                
                
                
            }
            $('#pwd_btn').click(function(){
                pwd_clicked = false;
                $('#change_pwd1').html('<div class="signup_left"><label for="id_password1">비밀번호</label></div><div class="signup_right"><input type="password" name="password1" id="id_password1" placeholder=""></div></div>')
                $('#change_pwd2').attr('class','signup_div')
                $('#change_pwd2').html('<div class="signup_left"><label for="id_password2">비밀번호 확인</label></div><div class="signup_right"><input type="password" name="password2" id="id_password2"></div>')
            });

            var angle = 0;
            var time1;
            var time2;

            $("#mobile_list1").click(function(){
                clearTimeout(time1);
                clearTimeout(time2);
                if(angle === 0)
                {
                    $('.mypage_topBar2').css('display','block')
                    time1 = setInterval(function(){
                        if(angle < 180)angle+=5;
                        $("#mobile_list1 span").css('transform','rotate('+angle+'deg)');
                    },1);
                }
                else
                {
                    $('.mypage_topBar2').css('display','none')
                    time2 = setInterval(function(){
                        if(angle > 0)angle-=5;
                        
                        $("#mobile_list1 span").css('transform','rotate('+angle+'deg)');
                    },1);
                }
            })

            $('.mypage_topBarLi div').click( function(){
                clearTimeout(time1);
                clearTimeout(time2);
                var get_id = $(this).attr('id');
                var get_val = $(this).text();
                
                for(var i=1; i<6; i++)
                {
                    $('.mypage_container'+i).css('display','none')
                    $('#mypage_container'+i).css('color','#000000')
                }
                $('.'+get_id).css('display','block')
                $('#'+get_id).css('color','#2eae7d')
                $("#mobile_list1").html(get_val+'<span>&nbsp;▼</span>');
            });
            

            $('.mypage_topBar2 div').click( function(){
                clearTimeout(time1);
                clearTimeout(time2);
                var get_id = $(this).attr('id');
                var get_val = $(this).text();
                get_val = get_val.replace('-','');
                $("#mobile_list1").html(get_val+'<span>&nbsp;▼</span>');
                for(var i=1; i<6; i++)
                {
                    $('.mypage_topBarLi #mypage_container'+i).css('color','#000000')
                }
                $('.mypage_topBarLi #'+get_id).css('color','#2eae7d');
                for(var i=1; i<5; i++)
                {
                    $('.mypage_container'+i).css('display','none')
                    
                }
                $('.'+get_id).css('display','block')
                $('.mypage_topBar2').css('display','none')
                time2 = setInterval(function(){
                    if(angle > 0)angle-=5;
                    
                    $("#mobile_list1 span").css('transform','rotate('+angle+'deg)');
                },1);
            });
        </script>



        <div class="mypage_container2">
            {% if not item_info %}
                <div style="width:100%;margin: 0 auto;text-align:center;margin-top:50px;font-weight: bold;font-size: 20px;">등록한 방 없음</div>
            {% endif %}
            {% for item in item_info %}
            <div class="register_container">        
                    <form method="POST" class="register_form" autocomplete="off" enctype="multipart/form-data">
                        {% csrf_token %}
                        <input type="hidden" value="1" name="mypage_num">
                        <fieldset class="room-field">
                            <legend class="required">방 정보</legend>
                            <div class="room-info">
                                <div class="hr-mobile"></div>
                                <div class="box-wrap">
                                        {{ form2.address.errors }}
                                    <label class="label-title" for="id_address">주소</label>
                                    <div class="address-wrap">
                                        <!---<input type="text">--->
                                        <input class="address-btn" type="button" onclick="execDaumPostcode()" value="주소 검색">
                                        <input type="text" name="address" id="id_address" style="border: 2px solid #ccc;height:31px;width:65%;margin:0;min-width: 200px;" value="{{item.address}}">
                                    </div>
                                    <input type="hidden" id="id_latitude" name="latitude">
                                    <input type="hidden" id="id_longitude" name="longitude">
                                </div>
                                <div class="box-wrap">
                                    {{ form2.address_detail.errors }}
                                    <label class="label-title" for="id_address_detail">상세주소</label>
                                    <input type="text" name="address_detail" maxlength="255" min="0" required id="id_address_detail" placeholder="상세주소를 입력해주세요." value="{{item.address_detail}}">
                                    <div class="map-guide">
                                        <strong>방 주소가 직접적으로 노출되지 않습니다!</strong>
                                        <span>전대차거래 특성상 현재 살고 있는 세입자의 정보가 노출되는 위험이 있으므로 방방은 반경 30m의 원으로 위치를 표시합니다.</span>
                                    </div>
                                </div>
                                <div class="hr"></div>
                                <div class="box-wrap">
                                    {{ form2.univ.errors }}
                                    <label class="label-title" for="id_univ">대학교</label>
                                    <div class="form-guide">본인의 방과 가장 가까운 대학교를 골라주세요.</div>
                                    {{ form2.univ }}
                                    <script>
                                        $('#id_univ option[value={{item.univ}}]').attr('selected','selected')
                                    </script>
                                </div>
                                <div class="hr"></div>
                
                                <div class="box-wrap">
                                    <label class="label-title" for="id_tags">태그설정</label>
                                    <div class="form-guide" style="font-size: 14px;">본인의 방과 가장 가까운 태그를 고르거나 적어주세요.</div>
                                    <label class="label-title" for="id_tags">&nbsp;</label>
                                    {{ form2.tag.errors }}
                                    <div><input type="text" name="tag" id="id_tag" placeholder="#ㅇㅇㅇ" style="padding: 0 0 0 12px;border: 2px solid #ccc;height:26px;width:65%;margin:0;" required value="{{item.tag}}"></div>
                                    <script>
                                        var count_tag = 0;
                                    </script>
                                    <div class="tag-wrap">
                                        {% for tag in tags %}
                                        <span class="tag-radio-span" id="{{tag.univ}}" style="display: none">
                                            <input class="tag-input" type="radio" id="tag_type0" name="tag_type_group" value="{{tag.tag}}">
                                            <label class="tag-label" for="tag_type0">{{tag.tag}}</label>
                                        </span>
                                        <script>
                                            count_tag++;
                                            $('input[id=tag_type0]').attr('id', 'tag_type'+count_tag);
                                            $('label[for=tag_type0]').attr('for', 'tag_type'+count_tag);
                                        </script>
                                        {% endfor %}
                                    </div>
                                </div>
                                <div class="hr"></div>
                
                                <div class="box-wrap">
                                    <label class="label-title" for="id_room_type">방종류</label>
                                    <div class="room-radio-wrap">
                                        <span class="room-radio-span">
                                            <input type="radio" id="room_type1" name="room_type" value="원룸" required checked>
                                            <label class="room-label" for="room_type1">원룸</label>
                                        </span>
                                        <span class="room-radio-span">
                                            <input type="radio" id="room_type2" name="room_type" value="1.5룸" required>
                                            <label class="room-label" for="room_type2">1.5룸</label>
                                        </span>
                                        <span class="room-radio-span">
                                            <input type="radio" id="room_type3" name="room_type" value="투룸" required>
                                            <label class="room-label" for="room_type3">투룸</label>
                                        </span>
                                        <span class="room-radio-span">
                                            <input type="radio" id="room_type4" name="room_type" value="오피스텔" required>
                                            <label class="room-label" for="room_type4">오피스텔</label>
                                        </span>
                                    </div>
                                    <script>
                                        var type="{{item.room_type}}"
                                        for(var i=1;i<5;i++)
                                        {
                                            if($('#room_type'+i).val() === type)
                                                $('#room_type'+i).attr('checked','checked')
                                        }
                                    </script>
                                </div>
                            </div>
                            <div class="map-wrap">
                                <div id="map"></div>
                                <div class="map-guide">
                                    <strong>방 주소가 직접적으로 노출되지 않습니다!</strong>
                                    <span>전대차거래 특성상 현재 살고 있는 세입자의<br> 정보가 노출되는 위험이 있으므로 방방은<br> 반경 30m의 원으로 위치를 표시합니다.</span>
                                </div>
                            </div>
                        </fieldset>
                
                        <fieldset class="deal-field">
                
                            <legend class="required">거래 정보</legend>
                            <div class="hr"></div>
                            <div class="box-wrap">
                                <label class="label-title monthly1">현재 내는 월세</label>
                                <label class="label-title monthly2">현재 내는<br> 월세</label>
                
                                <input type="number" id="id_deposit" name="deposit" min="0" placeholder="보증금" required value="{{item.deposit}}">만원
                                <span class="slash">/</span>
                                <input type="number" id="id_monthly_cost" name="monthly_cost" min="0" placeholder="월세" required value="{{item.monthly_cost}}">만원
                            </div>
                            <div class="hr"></div>
                            <div class="box-wrap">
                                <label class="label-title deposit1" for="id_deposit_necessity">보증금 여부</label>
                                <label class="label-title deposit2" for="id_deposit_necessity">보증금<br>여부</label>
                                <div class="deposit-wrap">
                                    <span class="radio-span">
                                        <input type="radio" id="deposit_necessity_yes" name="deposit_necessity" value="True" checked required onclick="check2()">
                                        <label class="deal-label" for="deposit_necessity_yes">보증금 필요</label>
                                    </span>
                                    <span class="radio-span">
                                        <input type="radio" id="deposit_necessity_no" name="deposit_necessity" value="False" required onclick="check2()">
                                        <label class="deal-label" for="deposit_necessity_no">보증금 불필요</label>
                                    </span>
                                    <span class="expense">
                                        보증금
                                        <input type="text" name="desired_deposit" value="0" maxlength="1000" min="0" id="id_deposit_take" required value="{{item.desired_deposit}}">만원
                                    </span>
                                    <script>
                                        var type="{{item.deposit_necessity}}"
                                        if(type === 'True')
                                        {
                                            $('#deposit_necessity_yes').click() 
                                        }
                                        else
                                        {
                                            $('#deposit_necessity_no').click() 
                                            check2()
                                        }
                                    </script>
                                </div>
                            </div>
                            <div class="hr"></div>
                            <div class="box-wrap">
                                <label class="label-title">받을 월세</label>
                                <input type="number" id="id_monthly_cost_take" name="desired_monthly" min="0" placeholder="월세" required value="{{item.desired_monthly}}">만원
                
                            </div>
                            <div class="hr"></div>
                            <div class="box-wrap">
                                <label class="label-title mancost1" maxlength=6 for="id_management_cost_include" required>관리비 포함 여부</label>
                                <label class="label-title mancost2" maxlength=6 for="id_management_cost_include" required>관리비<br> 포함 여부</label>
                                <div class="management-cost-wrap">
                                    <span class="radio-span">
                                        <input type="radio" id="id_management_cost_include_yes" name="management_cost_include" value="True" checked required onclick="check1()">
                                        <label class="deal-label" for="id_management_cost_include_yes">예</label>
                                    </span>
                                    <span class="radio-span">
                                        <input type="radio" id="id_management_cost_include_no" name="management_cost_include" value="False" required onclick="check1()">
                                        <label class="deal-label" for="id_management_cost_include_no">아니요</label>
                                    </span>
                                    <span class="expense">
                                        관리비
                                        <input type="text" name="management_cost" value="{{item.management_cost}}" maxlength="6" min="0" id="id_management_cost_include" readonly style="background-color: #bdbdbd">만원
                                    </span>
                                </div>
                                <script>
                                    var type="{{item.deposit_necessity}}"
                                    if(type === 'False')
                                    {
                                        $('#id_management_cost_include_yes').click() 
                                    }
                                    else
                                    {
                                        $('#id_management_cost_include_no').click() 
                                        check1()
                                    }
                                </script>
                            </div>
                
                            <div class="hr"></div>
                            <div class="box-wrap">
                                <label class="label-title due1" for="">방을 빌려주는 기간</label>
                                <label class="label-title due2" for="">방을<br> 빌려주는 <br> 기간</label>
                                <div class="term">
                                    <input type="text" name="start_date" value="{{item.start_date}}" maxlength="15" id="id_start_date" required> ~ <input type="text" value="{{item.end_date}}" name="end_date" maxlength="15" id="id_end_date" required>
                                    <span class="term-guide">* 빌려줄 수 있는 기간을 최대로 설정하시면 매칭이 빨라져요!</span>
                                </div>
                            </div>
                
                            <div class="hr"></div>
                            <div class="box-wrap">
                                <label class="label-title" for="id_floor">층수</label>
                                {{form2.floor}}
                            </div>
                            <script>
                                $('#id_floor option[value={{item.floor}}]').attr('selected','selected')
                            </script>
                            <div class="hr"></div>
                            <div class="box-wrap">
                                <label class="label-title preference1" for="sublessee_type1">선호하는 방 구매자</label>
                                <label class="label-title preference2" for="sublessee_type1">선호하는<br> 방 구매자</label>
                
                                <div class="radio-span-wrap">
                                    <span class="radio-span">
                                        <input type="radio" id="id_sublessee_type1_yes" name="sublessee_type1" value="흡연자" required>
                                        <label class="deal-label" for="id_sublessee_type1_yes">흡연자</label>
                                    </span>
                                    <span class="radio-span">
                                        <input type="radio" id="id_sublessee_type1_no" name="sublessee_type1" value="비흡연자" required>
                                        <label class="deal-label" for="id_sublessee_type1_no">비흡연자</label>
                                    </span>
                                    <span class="radio-span">
                                        <input type="radio" id="id_sublessee_type1_any" name="sublessee_type1" value="상관없음" required>
                                        <label class="deal-label" for="id_sublessee_type1_any">상관없음</label>
                                    </span>
                                    <div class="hr-light"></div>
                                    <script>
                                        var type="{{item.sublessee_type1}}"
                                        if(type === '흡연자')
                                            $('#id_sublessee_type1_yes').click() 
                                        else if(type === '비흡연자')
                                            $('#id_sublessee_type1_no').click() 
                                        else
                                            $('#id_sublessee_type1_any').click() 
                                    </script>
                                    <label class="label-title blind" for="sublessee_type2">선호하는 방구매자 성별</label>
                                    <span class="radio-span">
                                        <input type="radio" id="id_sublessee_type2_female" name="sublessee_type2" value="여성" required>
                                        <label class="deal-label" for="id_sublessee_type2_female">여성</label>
                                    </span>
                                    <span class="radio-span">
                                        <input type="radio" id="id_sublessee_type2_male" name="sublessee_type2" value="남성" required>
                                        <label class="deal-label" for="id_sublessee_type2_male">남성</label>
                                    </span>
                                    <span class="radio-span">
                                        <input type="radio" id="id_sublessee_type2_any" name="sublessee_type2" value="상관없음" required>
                                        <label class="deal-label" for="id_sublessee_type2_any">상관없음</label>
                                    </span>
                                    <script>
                                        var type="{{item.sublessee_type2}}"
                                        if(type === '여성')
                                            $('#id_sublessee_type2_female').click() 
                                        else if(type === '남성')
                                            $('#id_sublessee_type2_male').click() 
                                        else
                                            $('#id_sublessee_type2_any').click() 
                                    </script>
                                </div>
                            </div>
                
                            <div class="hr"></div>
                            <div class="box-wrap">
                                <label class="label-title" for="id_room_options">방 옵션</label>
                                <div class="option">
                                    <span class="checkbox-span">
                                        <input type="checkbox" id="room_options_air_conditioner" class="id_room_options" value="에어컨">
                                        <label class="deal-label" for="room_options_air_conditioner">에어컨</label>
                                    </span>
                                    <span class="checkbox-span">
                                        <input type="checkbox" id="room_options_bed" class="id_room_options" value="침대">
                                        <label class="deal-label" for="room_options_bed">침대</label>
                                    </span>
                                    <span class="checkbox-span">
                                        <input type="checkbox" id="room_options_chair" class="id_room_options" value="의자">
                                        <label class="deal-label" for="room_options_chair">의자</label>
                                    </span>
                                    <span class="checkbox-span">
                                        <input type="checkbox" id="room_options_desk" class="id_room_options" value="책상">
                                        <label class="deal-label" for="room_options_desk">책상</label>
                                    </span>
                                    <span class="checkbox-span">
                                        <input type="checkbox" id="room_options_washer" class="id_room_options" value="세탁기">
                                        <label class="deal-label" for="room_options_washer">세탁기</label>
                                    </span>
                                    <span class="checkbox-span">
                                        <input type="checkbox" id="room_options_induction" class="id_room_options" value="인덕션">
                                        <label class="deal-label" for="room_options_induction">인덕션</label>
                                    </span>
                                    <span class="checkbox-span">
                                        <input type="checkbox" id="room_options_refrigerator" class="id_room_options" value="냉장고">
                                        <label class="deal-label" for="room_options_refrigerator">냉장고</label>
                                    </span>
                                    <span class="checkbox-span">
                                        <input type="checkbox" id="room_options_microwave" class="id_room_options" value="전자레인지">
                                        <label class="deal-label" for="room_options_microwave">전자레인지</label>
                                    </span>
                                    <span class="checkbox-span">
                                        <input type="checkbox" id="room_options_tv" class="id_room_options" value="TV">
                                        <label class="deal-label" for="room_options_tv">TV</label>
                                    </span>
                                    <span class="checkbox-span">
                                        <input type="checkbox" id="room_options_wifi" class="id_room_options" value="WI-FI">
                                        <label class="deal-label" for="room_options_wifi">WI-FI</label>
                                    </span>
                                    <span class="checkbox-span">
                                        <input type="checkbox" id="room_options_veranda" class="id_room_options" value="베란다">
                                        <label class="deal-label" for="room_options_veranda">베란다</label>
                                    </span>
                                    <span class="checkbox-span">
                                        <input type="checkbox" id="room_options_closet" class="id_room_options" value="옷장">
                                        <label class="deal-label" for="room_options_closet">옷장</label>
                                    </span>
                                    <span class="checkbox-span">
                                        <input type="checkbox" id="room_options_shoes" class="id_room_options" value="신발장">
                                        <label class="deal-label" for="room_options_shoes">신발장</label>
                                    </span>
                                    <span class="checkbox-span">
                                        <input type="checkbox" id="room_options_doorlock" class="id_room_options" value="도어락">
                                        <label class="deal-label" for="room_options_doorlock">도어락</label>
                                    </span>
                                    <span class="checkbox-span">
                                        <input type="checkbox" id="room_options_gas" class="id_room_options" value="가스레인지">
                                        <label class="deal-label" for="room_options_gas">가스레인지</label>
                                    </span>
                                </div>
                                <script>
                                    var options="{{item.room_options}}" 
                                    var split_str = options.split(',');
                                    for(var i in split_str){
                                        $('.id_room_options[value = '+ split_str[i] ).attr('checked','checked')
                                    }
                                </script>
                                <input type="hidden" id="id_room_options" name="room_options" value="{{item.room_options}}">
                            </div>
                
                            <div class="hr"></div>
                            <div class="box-wrap">
                                <label class="label-title seller-view-type1" for="seller-info">판매자 정보 표시 유형</label>
                                <label class="label-title seller-view-type2" for="seller-info">판매자<br>정보 표시<br>유형</label>
                
                                <span class="radio-span">
                                    <input type="radio" id="phone" name="seller-info" value="전화번호" required>
                                    <label class="deal-label" for="phone">전화번호</label>
                                </span>
                                <span class="radio-span">
                                    <input type="radio" id="email" name="seller-info" value="이메일" required>
                                    <label class="deal-label" for="email">이메일</label>
                                </span>
                                <span class="radio-span">
                                    <input type="radio" id="kakao" name="seller-info" value="카톡 아이디" required>
                                    <label class="deal-label" for="kakao">카톡 아이디</label>
                                </span>
                            </div>
                            <script>
                                var type="{{item.sublessor_type1}}"
                                if(type === '전화번호')
                                    $('#phone').click() 
                                else if(type === '이메일')
                                    $('#email').click() 
                                else
                                    $('#kakao').click() 
                            </script>
                            <input type="hidden" id="id_sublessor_type1" name="sublessor_type1" value="{{item.sublessor_type1}}">
                            <div class="hr"></div>
                            <div class="box-wrap">
                                <label class="label-title kakao-pc" for="id_kakaotalk" id="seller-info-val">카카오톡 아이디</label>
                                <label class="label-title kakao-mobile" for="id_kakaotalk" id_kakaotalk>카카오톡<br>아이디</label>
                                <input type="text" name="sublessor_type2" id="id_kakaotalk" placeholder="카카오톡 아이디 입력하기" required value="{{item.sublessor_type2}}">
                            </div>
                            <div class="hr"></div>
                        </fieldset>
                
                        <fieldset class="detail-field">
                            <legend>방 상세 설명(선택)</legend>
                            {% if item.room_desc == None %}
                                <textarea class="detail" name="room_desc" id="id_room_desc" cols="30" rows="10" placeholder="입력사항 없음"></textarea>
                            {% else%}
                                <textarea class="detail" name="room_desc" id="id_room_desc" cols="30" rows="10" placeholder="입력사항 없음">{{item.room_desc}}</textarea>    
                            {% endif %}
                        </fieldset>
                
                        <fieldset class="additional-field">
                            <legend>
                                <button type="button" class="additional-field-btn" onclick="fold()">
                                    방 추가 정보(선택)
                                    <img src="../static/img/icon/fold_btn.png" alt="펼치기 버튼">
                                </button>
                            </legend>
                            <div class="folded">
                                <div class="hr"></div>
                
                                <div class="box-wrap">
                                    <label class="label-title" for="id_room_size">면적</label>
                                    {% if item.room_size == None %}
                                        <input type="text" name="room_size" id="id_room_size" placeholder="입력사항 없음" value="">
                                    {% else%}
                                        <input type="text" name="room_size" id="id_room_size" placeholder="" value="{{item.room_size}}">
                                    {% endif %}
                                    m<sup>2</sup>
                                </div>
                                <div class="hr"></div>
                
                                <div class="box-wrap">
                                    <label class="label-title" for="is_duplex">복층 여부</label>
                                    <span class="radio-span">
                                        <input type="radio" id="id_duplex_yes" name="is_duplex" value="예">
                                        <label class="deal-label" for="id_duplex_yes">예</label>
                                    </span>
                                    <span class="radio-span">
                                        <input type="radio" id="id_duplex_no" name="is_duplex" value="아니요">
                                        <label class="deal-label" for="id_duplex_no">아니요</label>
                                    </span>
                                </div>
                                <script>
                                    var type="{{item.is_duplex}}"
                                    if(type === '예')
                                        $('#id_duplex_yes').click() 
                                    else
                                        $('#id_duplex_no').click() 
                                </script>
                                <input type="hidden" name="is_duplex" id="id_is_duplex">
                                <div class="hr"></div>
                
                                <div class="box-wrap">
                                    <label class="label-title" for="id_window">창문개수</label>
                                    <select name="window" id="id_window">
                                        <option value="" selected></option>
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                        <option value="7">7</option>
                                        <option value="7개 이상">7개 이상</option>
                                    </select>
                                    개
                                </div>
                                <script>
                                    $('#id_window option[value ={{item.window}} ]').attr('selected','selected')
                                </script>
                                <div class="hr"></div>
                            </div>
                        </fieldset>
                
                    <br>
                    <br>
                    <br>
                    <br>
                    <br>
                
                    <div id="register_img_form" class="register_img_form" autocomplete="off" >
                        <fieldset class="image-field">
                            <legend class="required">사진 등록</legend>
                            <ul class="tab">
                                <li class="tab1 selected"><a href="#register_img_form" onclick="tab1()">일반 사진</a></li>
                                <li class="tab2"><a href="#register_img_form" onclick="tab2()">파노라마 사진</a></li>
                            </ul>
                            <section class="tab-content">
                                <div class="tab1-content">
                                    <div class="tab-guide">
                                        <ul>
                                            <li>최소 2장, 최대 4장 업로드 가능</li>
                                            <li>방 전체, 화장실, 부엌, 집 외관 순으로 찍는 것을 추천</li>
                                            <li>가로촬영 권장</li>
                                        </ul>
                                    </div>
                
                                    <div class="images_container">
                                        <div class="img-type1">
                                            <div><img src="../static/img/img_icon_temp.png" id="image_section1" width="100%" height="100%"></div>
                                            <span style="float: left;margin-top:10px ;">변경하기 :  &nbsp;&nbsp;&nbsp;</span><input type="file" name="photo1" id="id_photo1" style="display: block;margin-top:5px ;" accept="image/*">
                                        </div>
                                        <div class="img-type1">
                                            <div><img src="../static/img/img_icon_temp.png" id="image_section2" width="100%" height="100%"></div>
                                            <span style="float: left;margin-top:10px ;">변경하기 :  &nbsp;&nbsp;&nbsp;</span><input type="file" name="photo2" id="id_photo2" style="display: block;;margin-top:5px ;" accept="image/*">
                                        </div>
                                        <div class="img-type1" style="margin-top: 5px ;">
                                            <div><img src="../static/img/img_icon_temp.png" id="image_section3" width="100%" height="100%"></div>
                                            <span style="float: left;margin-top:10px ;">변경하기 :  &nbsp;&nbsp;&nbsp;</span><input type="file" name="photo3" id="id_photo3" style="display: block;;margin-top:5px ;" accept="image/*">
                                        </div>
                                        <div class="img-type1" style="margin-top: 5px ;">
                                            <div><img src="../static/img/img_icon_temp.png" id="image_section4" width="100%" height="100%"></div>
                                            <span style="float: left;margin-top:10px ;">변경하기 :  &nbsp;&nbsp;&nbsp;</span><input type="file" name="photo4" id="id_photo4" style="display: block;;margin-top:5px ;" accept="image/*">
                                        </div>
                                    </div>
                                    
                                    <script>
                                        var i=1;
                                        if("{{item.photo1.url}}".length > 10)
                                            $('#image_section1').attr('src','{{item.photo1.url}}')
                                        if("{{item.photo2}}".length > 10)
                                            $('#image_section2').attr('src','{{item.photo2.url}}')
                                        if("{{item.photo2}}".length > 10)
                                            $('#image_section3').attr('src','{{item.photo3.url}}')
                                        if("{{item.photo2}}".length > 10)
                                            $('#image_section4').attr('src','{{item.photo4.url}}')
                                        
                                    </script>
                                </div>
                                <div class="tab2-content folded">
                                    <dl class="tab-guide">
                                        <dt>파노라마 사진이란?</dt>
                                        <dd>- 스마트폰의 파노라마 기능을 이용해, 회전하며 방안을 둘러볼 수 있는 사진입니다.</dd>
                
                                        <dt>파노라마 사진 제작하기</dt>
                                        <dd>
                                            <ol>
                                                <li>핸드폰의 카메라 어플을 켭니다.</li>
                                                <li>'파노라마 기능'을 선택하여 사진을 찍습니다.</li>
                                                <li>핸드폰으로 찍은 파노라마 사진을 불러옵니다.</li>
                                                <li>파노라마 사진이 잘 찍혔는지(사진의 끝과 끝이 잘 연결되었는지) 확인하고 업로드합니다.</li>
                                            </ol>
                                        </dd>
                                    </dl>
                
                                    <div class="images_container">
                                        <div class="img-type2">
                                            <div><img src="../static/img/img_icon_temp.png" id="image_section5"></div>
                                            <input type="file" name="pano_photo" id="id_photo5">
                                        </div>
                                    </div>
                                    <script>
                                        if("{{item.pano_photo}}".length > 10){
                                            $('#image_section5').attr('src','{{item.pano_photo.url}}')
                                            $('.img-type2').css('transform','scaleY(-1)')
                                        }
                                    </script>
                                    <div class="img-register-btn">
                                        <div class="file_input_labels">
                                            <label style="display: block" for="id_photo5" id="file-label5"><br>파노라마 업로드</label>                        
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </fieldset>
                        <div class="next-btn">
                            <button type="submit" class="next">방 정보 변경하기</button>
                        </div>
                    </div>
                    </form>
                </div>
                <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
                <script>
                    var client_width = document.body.clientWidth;
                    if(client_width < 800)
                    {
                        //$(".mypage_container2").css('width',client_width)
                    }
                    $(window).resize(function()
                    {
                    });
                    $("#mypage_container2").click(function(){
                        document.getElementById("id_address").readOnly = true;
                        var lat = "{{item.latitude}}";
                        var lng = "{{item.longitude}}";
                        var coords = new kakao.maps.LatLng(lat, lng);
                        var mapContainer = document.getElementById('map'), // 지도를 표시할 div
                            mapOption = {
                                center: coords, // 지도의 중심좌표
                                level: 4 // 지도의 확대 레벨
                            };
                        // 마커를 생성합니다
                        var marker = new kakao.maps.Marker({
                            position: coords
                        });
                        var map = new kakao.maps.Map(mapContainer, mapOption);;
                        
                        marker.setMap(map);
                        mapContainer.style.display = "block";
                        document.getElementById('id_latitude').value = lat;
                        document.getElementById('id_longitude').value = lng;
                        map.relayout();
                        // 지도 중심을 변경한다.
                        map.setCenter(coords);
                        map.setLevel(4)
                        // 마커를 결과값으로 받은 위치로 옮긴다.
                        marker.setPosition(coords)
                        
                        //주소-좌표 변환 객체를 생성
                        var geocoder = new kakao.maps.services.Geocoder();
                        //마커를 미리 생성
                        var marker = new kakao.maps.Marker({
                            position: coords,
                            map: map
                        });
                        map.setDraggable(false);
                        map.setZoomable(false);
                
                        function execDaumPostcode() {
                            $('.placeholder show').val('geeg')
                            new daum.Postcode({
                                oncomplete: function(data) {
                                    var addr = data.address; // 최종 주소 변수
                                    
                                    // 주소 정보를 해당 필드에 넣는다.
                                    document.getElementById("id_address").value = addr;
                                    // 주소로 상세 정보를 검색
                                    geocoder.addressSearch(data.address, function(results, status) {
                                        // 정상적으로 검색이 완료됐으면
                                        if (status === daum.maps.services.Status.OK) {
                
                                            var result = results[0]; //첫번째 결과의 값을 활용
                
                                            // 해당 주소에 대한 좌표를 받아서
                                            var coords = new daum.maps.LatLng(result.y, result.x);
                                            // 지도를 보여준다.
                                            mapContainer.style.display = "block";
                                            document.getElementById('id_latitude').value = result.y;
                                            document.getElementById('id_longitude').value = result.x;
                                            map.relayout();
                                            // 지도 중심을 변경한다.
                                            map.setCenter(coords);
                                            map.setLevel(4)
                                            // 마커를 결과값으로 받은 위치로 옮긴다.
                                            marker.setPosition(coords)
                                        }
                                    });
                                }
                            }).open();
                        }
                    });
                    $('#id_univ').on('change', function() {
                        var value = $(this).val();
                        var count = "{{count}}"
                        for (var i = 0; i < count; i++) {
                            if (value != document.getElementsByClassName('tag-radio-span')[i].id)
                                document.getElementsByClassName('tag-radio-span')[i].style.display = "none";
                            else
                                document.getElementsByClassName('tag-radio-span')[i].style.display = "inline-block";
                        }
                    });
            
                </script>        
            {% endfor %} 
        </div>
        <div class="mypage_container3">
            <div class="items_wrap" id="items_wrap">
            <div id="loading"></div>
                <div id="items">
                        {% for item in like %}
                        <div class="item{{item.auto_increment_id}}" id="item" onclick="goto_detail('{{item.auto_increment_id}}')">
                            <div class="item0">
                                <form action="/room_detail" method="get" class="submit_detail_form">
                                    <input type="hidden" value="{{item.auto_increment_id}}" readonly name="item_id">
                                    <input type="submit" style="display:none" id="get_id{{item.auto_increment_id}}" class="submit_detail">
                                </form>
                                <div class="item-image">
                                    <img src="{{item.photo1.url}}" alt="">
                                </div>
                                <div class="item-info">
                                    <span class="room">{{item.room_type}}</span>
                                    <span class="cost">월세 {{item.desired_monthly}}만원</span>
                                    <div class="due">{{ item.start_date | date:"Y" }}.{{ item.start_date | date:"m" }}.{{ item.start_date | date:"d" }}~{{ item.end_date | date:"Y" }}.{{ item.end_date | date:"m"}}.{{ item.end_date | date:"d"}}</div>
                                    {% if item.deposit_necessity != 'False'  %}
                                        {% if item.management_cost_include != 'False'  %}
                                            <div class="attr">보증금 필요 | 관리비 포함 </div>
                                        {% else %}    
                                            <div class="attr">보증금 필요 | 관리비 미포함 </div>
                                        {% endif %}
                                    {% else %}
                                        {% if item.management_cost_include != 'False'  %}
                                            <div class="attr">보증금 불필요 | 관리비 포함 </div>
                                        {% else %}    
                                            <div class="attr">보증금 불필요 | 관리비 미포함 </div>
                                        {%endif%}
                                    {%endif%}
                                    <!--<div class="attr">{{item.floor}} |  {{item.room_type}}</div>-->
                                    <div class="tag">{{item.tag}}</div>
                                </div>
                            </div>
                        </div>
                        {%endfor%}
                </div>
            </div>
        </div>
        <script>
            function goto_detail(id)
            {
                var submit_id = 'get_id'+id
                document.getElementById(submit_id).click();
            }

        </script>
        <div class="mypage_container4"> 
            {% if buyer == 'x' and seller == 'x' %}
            <div style="width:100%;margin: 0 auto;text-align:center;margin-top:50px;font-weight: bold;font-size: 20px;">진행중인 거래가 없어요</div>
            {% elif complete_contract1.0 %}
            <div style="width:100%;margin: 0 auto;text-align:center;margin-top:50px;font-weight: bold;font-size: 20px;">진행중인 거래가 없어요</div>
			{% elif complete_contract2.0 %}
            <div style="width:100%;margin: 0 auto;text-align:center;margin-top:50px;font-weight: bold;font-size: 20px;">진행중인 거래가 없어요</div>
            {% else %}
                {% for buyer in buyer %}
                    <div class="sell_or_buy"> <span>▶</span> 방 사기</div>
                    <div class="contract_call">
                        <div class="contract_user">'{{buyer.Room_seller}}'님에게 보낸 계약 요청</div>
                        <div class="contract_phone">{{buyer.Room_seller.phone1}} - {{buyer.Room_seller.phone2}} - {{buyer.Room_seller.phone3}}</div>
                    </div>
                    {% if buyer.Room_buyer.payment %}
                        {% if buyer.Room_seller.payment%}
                            <div class="contract4_btn">
                                <div style="padding-top:15px;height:37px" onclick="location.href='/contract/2'">계약서 설명보기</div>
                            </div>
                        {% else %}
                            <div class="contract4_btn">
                                <div style="padding-top:15px;height:37px">구매자가 미결제</div>
                            </div>
                        {% endif %}
                    {% else %}
                    <div class="contract4_btn">
                        <div style="padding-top:15px;height:37px">수락 기다리는 중</div>
                    </div>
                    {% endif %}
                {% endfor %}
                {% for seller in seller %}
                    <div class="sell_or_buy"> <span>▶</span> 방 팔기</div>
                    <div class="contract_call">
                        <div class="contract_user">'{{seller.Room_buyer}}'님의 계약 요청</div>
                        <div class="contract_phone">{{seller.Room_buyer.phone1}} - {{seller.Room_buyer.phone2}} - {{seller.Room_buyer.phone3}}</div>
                    </div>
                    {% if seller.Room_seller.payment %}
                        {% if seller.Room_buyer.payment%}
                            <div class="contract4_btn">
                                <div style="padding-top:15px;height:37px" onclick="location.href='/contract/2'">계약서 받아보기</div>
                            </div>
                        {% else %}
                            <div class="contract4_btn">
                                <div style="padding-top:15px;height:37px">구매자가 미결제</div>
                            </div>
                        {% endif %}
                    {% else %}
                    <div class="contract4_btn">
                        <div onclick="$('#contract4_submit1').click()">안전계약에 대해 <br>알아보고 수락하기 ></div>
                        <form action="/contract_confirm" method="get">
                            <input type="submit" style="display:none" id="contract4_submit1">
                        </form>
                    </div>
                    {% endif %}
                {% endfor %}
            {% endif %}

            {% if id %}
            {% for user in user_info %}
                {% if user.user_type|slice:"0:3" == '판매자' %}
                    <div class="sell_or_buy"> <span>▶</span> 방 팔기</div>
                    <div class="contract_call">
                        <div class="contract_user">'{{user.connector}}'님의 계약 요청</div>
                        <div class="contract_phone">{{buyer_phone}}</div>
                    </div>
                    <div class="contract4_btn">
                        <div onclick="$('#contract4_submit1').click()" style="height: 37px;padding-top:15px">결제하기</div>
                    </div>
                    {% for id in id %}
                        <form action="/contract/1" method="post">
                            {%csrf_token%}
                            <input type="hidden" name = "item_id" value="{{id.auto_increment_id}}">
                            <input type="submit" style="display:none" id="contract4_submit1">
                        </form>
                    {% endfor %}
                
                {% elif user.user_type|slice:"0:3" == '구매자'%}
                    <div class="sell_or_buy"> <span>▶</span> 방 사기</div>
                    <div class="contract_call">
                        <div class="contract_user">'{{user.connector}}'님에게 보낸 계약 요청</div>
                        <div class="contract_phone">{{seller_phone}}</div>
                    </div>
                    {% if user.user_type|slice:"9:10" != '0' %}
                        <div class="contract4_btn">
                            <div style="padding-top:15px;height:37px" onclick="$('#contract4_submit1').click()">결제하기</div>
                        </div>
                        {% for id in id %}
                            <form action="/contract/1" method="post">
                                {%csrf_token%}
                                <input type="hidden" name = "item_id" value="{{id.auto_increment_id}}">
                                <input type="submit" style="display:none" id="contract4_submit1">
                            </form>
                        {% endfor %}
                    {% else %}
                        <div class="contract4_btn">
                            <div style="padding-top:15px;height:37px">판매자가 상품 선택중</div>
                        </div>
                    {% endif %}
                    
                {% endif %}
            {% endfor %}
            {% endif %}
        </div>


        <div class="mypage_container5">
            {% if complete_contract1.0 %}
            <div class="items_wrap" id="items_wrap">
                    <div id="loading"></div>
                        <div id="items">
							<div class="item{{complete_contract1.0.room_info.auto_increment_id}}" id="item" onclick="goto_detail('{{complete_contract1.0.room_info.auto_increment_id}}')">
								<div class="item0">
									<form action="/room_detail" method="get" class="submit_detail_form">
										<input type="hidden" value="{{complete_contract1.0.room_info.auto_increment_id}}" readonly name="item_id">
										<input type="submit" style="display:none" id="get_id{{complete_contract1.0.room_info.auto_increment_id}}" class="submit_detail">
									</form>
									<div class="item-image">
										<img src="{{complete_contract1.0.room_info.photo1.url}}" alt="">
									</div>
									<div class="item-info">
										<span class="room">{{complete_contract1.0.room_info.room_type}}</span>
										<span class="cost">월세 {{complete_contract1.0.room_info.desired_monthly}}만원</span>
										<div class="due">{{ complete_contract1.0.room_info.start_date | date:"Y" }}.{{ complete_contract1.0.room_info.start_date | date:"m" }}.{{ complete_contract1.0.room_info.start_date | date:"d" }}~{{ complete_contract1.0.room_info.end_date | date:"Y" }}.{{ complete_contract1.0.room_info.end_date | date:"m"}}.{{ complete_contract1.0.room_info.end_date | date:"d"}}</div>
										{% if complete_contract1.0.room_info.deposit_necessity != 'False'  %}
											{% if complete_contract1.0.room_info.management_cost_include != 'False'  %}
												<div class="attr">보증금 필요 | 관리비 포함 </div>
											{% else %}    
												<div class="attr">보증금 필요 | 관리비 미포함 </div>
											{% endif %}
										{% else %}
											{% if complete_contract1.0.room_info.management_cost_include != 'False'  %}
												<div class="attr">보증금 불필요 | 관리비 포함 </div>
											{% else %}    
												<div class="attr">보증금 불필요 | 관리비 미포함 </div>
											{%endif%}
										{%endif%}
										<!--<div class="attr">{{complete_contract1.0.Room_seller.floor}} |  {{complete_contract1.0.Room_seller.room_type}}</div>-->
										<div class="tag">{{complete_contract1.0.room_info.tag}}</div>
									</div>
								</div>
							</div>
                        </div>
                    </div>
            {% endif%}
			{% if complete_contract2.0 %}
            <div class="items_wrap" id="items_wrap">
                    <div id="loading"></div>
                        <div id="items">
							<div class="item{{complete_contract2.0.room_info.auto_increment_id}}" id="item" onclick="goto_detail('{{complete_contract2.0.room_info.auto_increment_id}}')">
								<div class="item0">
									<form action="/room_detail" method="get" class="submit_detail_form">
										<input type="hidden" value="{{complete_contract2.0.room_info.auto_increment_id}}" readonly name="item_id">
										<input type="submit" style="display:none" id="get_id{{complete_contract2.0.room_info.auto_increment_id}}" class="submit_detail">
									</form>
									<div class="item-image">
										<img src="{{complete_contract2.0.room_info.photo1.url}}" alt="">
									</div>
									<div class="item-info">
										<span class="room">{{complete_contract2.0.room_info.room_type}}</span>
										<span class="cost">월세 {{complete_contract2.0.room_info.desired_monthly}}만원</span>
										<div class="due">{{ complete_contract2.0.room_info.start_date | date:"Y" }}.{{ complete_contract2.0.room_info.start_date | date:"m" }}.{{ complete_contract2.0.room_info.start_date | date:"d" }}~{{ complete_contract2.0.room_info.end_date | date:"Y" }}.{{ complete_contract2.0.room_info.end_date | date:"m"}}.{{ complete_contract2.0.room_info.end_date | date:"d"}}</div>
										{% if complete_contract2.0.room_info.deposit_necessity != 'False'  %}
											{% if complete_contract2.0.room_info.management_cost_include != 'False'  %}
												<div class="attr">보증금 필요 | 관리비 포함 </div>
											{% else %}    
												<div class="attr">보증금 필요 | 관리비 미포함 </div>
											{% endif %}
										{% else %}
											{% if complete_contract2.0.room_info.management_cost_include != 'False'  %}
												<div class="attr">보증금 불필요 | 관리비 포함 </div>
											{% else %}    
												<div class="attr">보증금 불필요 | 관리비 미포함 </div>
											{%endif%}
										{%endif%}
										<!--<div class="attr">{{complete_contract1.0.Room_seller.floor}} |  {{complete_contract1.0.Room_seller.room_type}}</div>-->
										<div class="tag">{{complete_contract2.0.room_info.tag}}</div>
									</div>
								</div>
							</div>
                        </div>
                    </div>
            {% endif%}
        </div>
    </div>
</div>
<script>
    var page = "{{page}}"*1
    
    if(document.referrer.match('contract_desc'))
        $("#mypage_container4").click()
    else if(page === 3)
        $("#mypage_container3").click()
    else if(page === 2)
        $("#mypage_container2").click()
    else if(page === 4)
        $("#mypage_container4").click()
    else if(page === 5)
        $("#mypage_container5").click()
    
        
</script>
{% endblock %}
